<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="style.css" type="text/css">
<script type="text/javascript" src="js.js"></script>

<title>Дз к уроку 3. Функции. ООП. ВОМ и DOM. - Конструктор</title>
</head>

<body>
<script type="text/javascript">



// function save()
// {
 
//  function myRecord(dolg, family, name, otch, age, child, staj, educat, address, phone, mail, auto)
//     {
//       this.dolg = dolg;
//       this.family = family;
//       this.name = name;
//       this.otch = otch;
// 	  this.age=age;
// 	  this.child=child;
// 	  this.staj=staj;
// 	  this.educat=educat;
// 	  this.address = address;
// 	  this.phone = phone;
// 	  this.mail=mail;    
//       this.auto=auto;
//     }

// rec1 = new myRecord("Инженер", "Иванов", "Иван", "Иванович", "25", "есть", "5", "Высшее", "Малая Большая ул., д. 225, кв. 226", "+3758324412","mail@mail.ru", "есть");

// }


var se = document.getElementById("xxx");


</script>	

<!-- <div id="xxx" onclick="d()" style="width: 200px; height: 50px; border: 1px solid black;"></div> -->
<center><div onclick="gl()" class="ss">На главную</div></center>
 <center><div id="save"></div></center> <!--class="ss"-->
<div class="form">
	
<h1>Новый работник</h1>

<form id="form"><!-- onsubmit="sssave()"  -->
	<table>
<tr><td>Должность:</td>
<td><select name="dolg" id="dolg">
    <option value="0">Выберите должность</option>
    <option value="1">Рабочий</option>
    <option value="2">Уборщик</option>
    <option value="3">Грузчик</option>
    <option value="4">Охранник</option>
    <option value="5">Инженер</option>
    <option value="6">Технолог</option>
    <option value="7">Водитель</option>
    <option value="8">Вахтёр</option>
    <option value="9">Системный администратор</option>
    <option value="10">Начальник транспортного цеха</option>
  </select></td></tr>

<tr><td>Фамилия:</td> <td><input type="text" id="fam" name="fam" required placeholder="Фамилия"></td></tr>  <!-- required -->
<tr><td>Имя:</td> <td><input type="text" id="im" name="im"  placeholder="Имя"></td></tr>
<tr><td>Отчество:</td> <td><input type="text" id="otch" name="otch"  placeholder="Отчество"></td></tr>
<tr><td>Дата рождения:</td> <td><input type="date" id="date" name="date"  placeholder="Дата рождения"></td></tr>
<tr><td>Наличие детей:</td> <td><input type="checkBox" id="child" name="child"></td></tr>
<tr><td>Стаж:</td> <td><input type="number" id="staj" name="staj"  placeholder="Стаж"></td></tr>
<tr><td>Образование:</td> <td><select name="educat" id="educat">
    <option value="0">Базовое</option>
    <option value="1">Среднее</option>
    <option value="2">Высшее</option>
  </select></td></tr>
<tr><td>Адрес:</td> <td><input type="text" id="address" name="address"  placeholder="Адрес:"></td></tr>
<tr><td>Телефон:</td> <td><input type="tel" id="tel" name="tel"  pattern="[\+]\d{3}\d{2}\d{3}\d{2}\d{2}" minlength="13" maxlength="13" placeholder="Телефон"></td></tr>
<tr><td>E-mail:</td> <td><input type="email" id="mail" name="mail" placeholder="E-mail"></td></tr>
<tr><td>Наличие автомобиля:</td> <td><input type="checkBox" id="auto" name="auto"></td></tr>
</table>
<center><div id="error"></div>
<button type="button" id="save" onclick="sssave()">Сохранить</button >  <button type="reset">Очистить</button></center>
<!-- onclick="event.preventDefault()" -->
	
</form>


</div>




<!-- <script type="text/javascript">

    function printTableHead()
    {
      document.write("<CENTER><TABLE BORDER>");
      document.write("<CAPTION ALIGN=CENTER></CAPTION>");
      document.write("<TH>Должность</TH>" + "<TH>Фамилия</TH>" + "<TH>Имя</TH>" + "<TH>Отчество</TH>" + "<TH>Возраст, лет</TH>" + "<TH>Наличие детй</TH>" + "<TH>Общий трудовой стаж, лет</TH>" + "<TH>Образование</TH>" + "<TH>Адрес</TH>" + "<TH>Телефон (мобильный)</TH>" + "<TH>E-mail</TH>" + "<TH>Наличие автомобиля</TH>" + "<TH>Правка</TH>");
    }

    function printTableEnd()
    {
      document.write("</CENTER></TABLE>");
    
    }

    function printRecord()
    {
      document.write("<TR><TD>"+ this.dolg.italics() +"</TD><TD>"+ this.family.italics() +"</TD><TD>"+ this.name.italics() +"</TD><TD>"+ this.otch.italics() +"</TD><TD>"+ this.age.italics() +"</TD><TD>"+ this.child.italics() +"</TD><TD>"+ this.staj.italics() +"</TD><TD>"+ this.educat.italics() +"</TD><TD>"+ this.address.italics() +"</TD><TD>"+ this.phone.italics() +"</TD><TD>"+ this.mail.italics() +"</TD><TD>"+ this.auto.italics() +"</TD><TD><A>Редактировать</A><BR>Удалить</TD></TR>");
    }

    function myRecord(dolg, family, name, otch, age, child, staj, educat, address, phone, mail, auto)
    {
      this.dolg = dolg;
      this.family = family;
      this.name = name;
      this.otch = otch;
	  this.age=age;
	  this.child=child;
	  this.staj=staj;
	  this.educat=educat;
	  this.address = address;
	  this.phone = phone;
	  this.mail=mail;    
      this.auto=auto;
      

      this.printRecord = printRecord;
      this.printTableHead = printTableHead;
      this.printTableEnd = printTableEnd;
    }

    
    </SCRIPT> -->

 <!--   <H1>Просмотр записей</H1>
     <SCRIPT LANGUAGE="JavaScript">
  
    var rec1;

    rec1 = new myRecord(document.getElementById("dolg").value, document.getElementById("fam").value, document.getElementById("im").value, document.getElementById("otch").value, document.getElementById("date").value, document.getElementById("child").value, document.getElementById("staj").value, document.getElementById("educat").value, document.getElementById("address").value, document.getElementById("tel").value,document.getElementById("mail").value, document.getElementById("auto").value);

    rec1.printTableHead();
    rec1.printRecord();
    rec1.printTableEnd();


</script> -->

<center><table id="t" border="1" style="margin-bottom: 50px; margin-top: 50px;"></table></center>


<script type="text/javascript">
//var se = document.getElementById("xxx");
var i=0;
var mas=[];
var errors=[];
function sssave()
{
	var error = document.getElementById("error");


if (document.getElementById('dolg').options[document.getElementById('dolg').selectedIndex].text=="" || document.getElementById('dolg').options[document.getElementById('dolg').selectedIndex].text=="Выберите должность") 
{
errors.push("Выберите должность");	
error.innerHTML="Выберите должность";
}


else if (document.getElementById("fam").value=="") 
{
errors.push("Введите фамилию");	
error.innerHTML="Введите фамилию";
}
else if (document.getElementById("im").value=="") 
{
errors.push("Введите имя");
error.innerHTML="Введите имя";
}

else if (document.getElementById("otch").value=="") 
{
errors.push("Введите отчество");
error.innerHTML="Введите отчество";
}

else if (document.getElementById("date").value=="") 
{
errors.push("Введите дату рождения");
error.innerHTML="Введите дату рождения";
}

else if (document.getElementById("staj").value=="") 
{
errors.push("Введите трудовой стаж");
error.innerHTML="Введите трудовой стаж";
}

else if (document.getElementById("address").value=="") 
{
errors.push("Введите адрес");
error.innerHTML="Введите адрес";
}

else if (document.getElementById("tel").value=="" || document.getElementById("tel").validity.valid==false) 
{
errors.push("Введите номер телефона");
error.innerHTML="Введите номер телефона";
}

else if (document.getElementById("mail").value=="" || document.getElementById("mail").validity.valid==false) 
{
errors.push("Введите адрес электронной почты");
error.innerHTML="Введите адрес электронной почты";
}


else 
if (document.getElementById("fam").value !="" && document.getElementById("im").value !="" && document.getElementById("otch").value !="" && document.getElementById("date").value !="" && document.getElementById("staj").value !="" && document.getElementById("educat").value !="" && document.getElementById("address").value !="" && document.getElementById("tel").value !="" && document.getElementById("mail").value !="") 
{
error.innerHTML="";
errors.length=0;



//------- вычисляем количество лет--------------------------------------------
var a = new Date(document.getElementById("date").value);
var b = new Date();

    var age = b.getFullYear() - a.getFullYear();
    var m = b.getMonth() - a.getMonth();
    if (m < 0 || (m === 0 && b.getDate() < a.getDate())) 
    {
        age--;
    }
    //return age;

//------- Считываем буливые значения чекбоксов и переводим в нормальные слова---------
// Дети
var c=document.getElementById("child").checked;
if(c==true)
c="Есть";
else
c="Нет";
// Авто
var d=document.getElementById("auto").checked;
if(d==true)
d="Есть";
else
d="Нет";

// object

function rabotnik(dolg, family, name, otch, age, child, staj, educat, address, phone, mail, auto)
    {
      this.dolg = dolg;
      this.family = family;
      this.name = name;
      this.otch = otch;
	  this.age=age;
	  this.child=child;
	  this.staj=staj;
	  this.educat=educat;
	  this.address = address;
	  this.phone = phone;
	  this.mail=mail;    
      this.auto=auto;

this.getDolg = function(){return this.dolg;}  
this.getFamily = function(){return this.family;}
this.getName = function(){return this.name;}
this.getOtch = function(){return this.otch;}
this.getAge = function(){return this.age;}
this.getChild = function(){return this.child;}
this.getStaj = function(){return this.staj;}
this.getEducat = function(){return this.educat;}
this.getAddress = function(){return this.address;}
this.getPhone = function(){return this.phone;}
this.getMail = function(){return this.mail;}
this.getAuto = function(){return this.auto;}

    }

var noviRabotnik = new rabotnik(document.getElementById('dolg').options[document.getElementById('dolg').selectedIndex].text, document.getElementById("fam").value, document.getElementById("im").value, document.getElementById("otch").value, age, c, document.getElementById("staj").value, document.getElementById('educat').options[document.getElementById('educat').selectedIndex].text, document.getElementById("address").value, document.getElementById("tel").value,document.getElementById("mail").value, d);

mas.push(noviRabotnik);    

//se.innerHTML=i + " - " + mas.length + "---" + mas[i].getDolg();


var stroka = document.createElement('tr');
var stolb1 = document.createElement('td');
stolb1.innerHTML=noviRabotnik.getDolg();
var stolb2 = document.createElement('td');
stolb2.innerHTML=noviRabotnik.getFamily();
var stolb3 = document.createElement('td');
stolb3.innerHTML=noviRabotnik.getName();
 var stolb4 = document.createElement('td');
 stolb4.innerHTML=noviRabotnik.getOtch();
 var stolb5 = document.createElement('td');
 stolb5.innerHTML=noviRabotnik.getAge();
 var stolb6 = document.createElement('td');
 stolb6.innerHTML=noviRabotnik.getChild();//document.getElementById("child").checked;
 var stolb7 = document.createElement('td');
 stolb7.innerHTML=noviRabotnik.getStaj();
 var stolb8 = document.createElement('td');
 stolb8.innerHTML=noviRabotnik.getEducat();
 var stolb9 = document.createElement('td');
 stolb9.innerHTML=noviRabotnik.getAddress();
 var stolb10 = document.createElement('td');
 stolb10.innerHTML=noviRabotnik.getPhone();
 var stolb11 = document.createElement('td');
 stolb11.innerHTML=noviRabotnik.getMail();
 var stolb12 = document.createElement('td');
 stolb12.innerHTML=noviRabotnik.getAuto();//document.getElementById("auto").checked;

//document.tab.appendChild(head);
document.getElementById("t").appendChild(stroka);
document.getElementById("t").appendChild(stolb1);
document.getElementById("t").appendChild(stolb2);
document.getElementById("t").appendChild(stolb3);
document.getElementById("t").appendChild(stolb4);
document.getElementById("t").appendChild(stolb5);
document.getElementById("t").appendChild(stolb6);
document.getElementById("t").appendChild(stolb7);
document.getElementById("t").appendChild(stolb8);
document.getElementById("t").appendChild(stolb9);
document.getElementById("t").appendChild(stolb10);
document.getElementById("t").appendChild(stolb11);
document.getElementById("t").appendChild(stolb12);

i++;


}

}


























//document.getElementById("form").onsubmit = function(e) 
document.getElementById("save").onclick = function(e) 
{
//return false;
//var se = document.getElementById("xxx");
// se.innerHTML=rec1.dolg;
 

//------- вычисляем количество лет--------------------------------------------
var a = new Date(document.getElementById("date").value);
var b = new Date();

    var age = b.getFullYear() - a.getFullYear();
    var m = b.getMonth() - a.getMonth();
    if (m < 0 || (m === 0 && b.getDate() < a.getDate())) 
    {
        age--;
    }
    //return age;

//------- Считываем буливые значения чекбоксов и переводим в нормальные слова---------
// Дети
var c=document.getElementById("child").checked;
if(c==true)
c="Есть";
else
c="Нет";
// Авто
var d=document.getElementById("auto").checked;
if(d==true)
d="Есть";
else
d="Нет";

// object

function rabotnik(dolg, family, name, otch, age, child, staj, educat, address, phone, mail, auto)
    {
      this.dolg = dolg;
      this.family = family;
      this.name = name;
      this.otch = otch;
	  this.age=age;
	  this.child=child;
	  this.staj=staj;
	  this.educat=educat;
	  this.address = address;
	  this.phone = phone;
	  this.mail=mail;    
      this.auto=auto;

this.getDolg = function(){return this.dolg;}  
this.getFamily = function(){return this.family;}
this.getName = function(){return this.name;}
this.getOtch = function(){return this.otch;}
this.getAge = function(){return this.age;}
this.getChild = function(){return this.child;}
this.getStaj = function(){return this.staj;}
this.getEducat = function(){return this.educat;}
this.getAddress = function(){return this.address;}
this.getPhone = function(){return this.phone;}
this.getMail = function(){return this.mail;}
this.getAuto = function(){return this.auto;}

    }

var noviRabotnik = new rabotnik(document.getElementById('dolg').options[document.getElementById('dolg').selectedIndex].text, document.getElementById("fam").value, document.getElementById("im").value, document.getElementById("otch").value, age, c, document.getElementById("staj").value, document.getElementById('educat').options[document.getElementById('educat').selectedIndex].text, document.getElementById("address").value, document.getElementById("tel").value,document.getElementById("mail").value, d);

mas.push(noviRabotnik);    

//se.innerHTML=i + " - " + mas.length + "---" + mas[i].getDolg();


var stroka = document.createElement('tr');
var stolb1 = document.createElement('td');
stolb1.innerHTML=noviRabotnik.getDolg();
var stolb2 = document.createElement('td');
stolb2.innerHTML=noviRabotnik.getFamily();
var stolb3 = document.createElement('td');
stolb3.innerHTML=noviRabotnik.getName();
 var stolb4 = document.createElement('td');
 stolb4.innerHTML=noviRabotnik.getOtch();
 var stolb5 = document.createElement('td');
 stolb5.innerHTML=noviRabotnik.getAge();
 var stolb6 = document.createElement('td');
 stolb6.innerHTML=noviRabotnik.getChild();//document.getElementById("child").checked;
 var stolb7 = document.createElement('td');
 stolb7.innerHTML=noviRabotnik.getStaj();
 var stolb8 = document.createElement('td');
 stolb8.innerHTML=noviRabotnik.getEducat();
 var stolb9 = document.createElement('td');
 stolb9.innerHTML=noviRabotnik.getAddress();
 var stolb10 = document.createElement('td');
 stolb10.innerHTML=noviRabotnik.getPhone();
 var stolb11 = document.createElement('td');
 stolb11.innerHTML=noviRabotnik.getMail();
 var stolb12 = document.createElement('td');
 stolb12.innerHTML=noviRabotnik.getAuto();//document.getElementById("auto").checked;

//document.tab.appendChild(head);
document.getElementById("t").appendChild(stroka);
document.getElementById("t").appendChild(stolb1);
document.getElementById("t").appendChild(stolb2);
document.getElementById("t").appendChild(stolb3);
document.getElementById("t").appendChild(stolb4);
document.getElementById("t").appendChild(stolb5);
document.getElementById("t").appendChild(stolb6);
document.getElementById("t").appendChild(stolb7);
document.getElementById("t").appendChild(stolb8);
document.getElementById("t").appendChild(stolb9);
document.getElementById("t").appendChild(stolb10);
document.getElementById("t").appendChild(stolb11);
document.getElementById("t").appendChild(stolb12);

i++;



}	




// function d()
// {

// }


function gl()
{

localStorage.setItem( 'objectToPass', JSON.stringify(mas));

location.replace("glavnaya.html");

}




</script>


















</body>

</html>