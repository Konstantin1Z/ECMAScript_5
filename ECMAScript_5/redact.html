<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">

<link rel="stylesheet" href="style.css" type="text/css">
<script type="text/javascript" src="js.js"></script>

	<title>Дз к уроку 3. Функции. ООП. ВОМ и DOM. - Просмотр и редактирование персонажа</title>




</head>

<body>

<h2 align="center">Подробная информация</h2>

<center><table id="tt" border="1">
<tr><td>Должность</td><td><select name="dolg" id="dolg">
    <option value="0">Выберите должность</option>
    <option value="1">Рабочий</option>
    <option value="2">Уборщик</option>
    <option value="3">Грузчик</option>
    <option value="4">Охранник</option>
    <option value="5">Инженер</option>
    <option value="6">Технолог</option>
    <option value="7">Водитель</option>
    <option value="8">Вахтёр</option>
    <option value="9">Системный администратор</option>
    <option value="10">Начальник транспортного цеха</option>
  </select></td></tr>	
<tr><td>Фамилия</td><td><input type="text" id="fam" name="fam"></td></tr>
<tr><td>Имя</td><td><input type="text" id="im" name="im"></td></tr>
<tr><td>Отчество</td><td><input type="text" id="otch" name="otch"></td></tr>
<tr><td>Возраст, лет</td><td><input type="text" id="date" name="date" required placeholder="Дата рождения"></td></tr>
<tr><td>Наличие детей</td><td><input type="checkBox" id="child" name="child"></td></tr>
<tr><td>Общий трудовой стаж, лет</td><td><input type="number" id="staj" name="staj" required placeholder="Стаж"></td></tr>
<tr><td>Образование</td><td><select name="educat" id="educat">
    <option value="0">Базовое</option>
    <option value="1">Среднее</option>
    <option value="2">Высшее</option>
  </select></td></tr>
<tr><td>Адрес</td><td><input type="text" id="address" name="address" required placeholder="Адрес:"></td></tr>
<tr><td>Телефон</td><td><input type="tel" id="tel" name="tel" required pattern="[\+]\d{3}\d{2}\d{3}\d{2}\d{2}" minlength="13" maxlength="13" placeholder="Телефон"></td></tr>
<tr><td>Е-маил</td><td><input type="email" id="mail" name="mail" placeholder="E-mail"></td></tr>
<tr><td>Наличие автомобиля</td><td><input type="checkBox" id="auto" name="auto"></td></tr>
<tr><td colspan="2"><center><button type="submit" id="saveee">Сохранить</button><button onclick="clear()" id="clear">Очистить</button></center></td></tr>

</table></center>


<center><button onclick="glav()">На главную</button><button onclick="constr()">В конструктор</button></center>

<div id="qqq"></div>



<script type="text/javascript">

var id = localStorage.getItem("idRec");

var myData = JSON.parse(localStorage.getItem("objectToPass"));

document.getElementById("qqq").innerHTML=myData[id]["dolg"];

document.getElementById("dolg").options[document.getElementById('dolg').selectedIndex].text=myData[id]["dolg"];
document.getElementById("fam").value=myData[id]["family"];
document.getElementById("im").value=myData[id]["im"];
document.getElementById("otch").value=myData[id]["otch"];
document.getElementById("date").value=myData[id]["age"];
if (myData[id]["child"]=="Есть") 
document.getElementById("child").checked = true;
else
document.getElementById("child").checked = false;
document.getElementById("staj").value=myData[id]["staj"];
document.getElementById("educat").options[document.getElementById('educat').selectedIndex].text=myData[id]["educat"];
document.getElementById("address").value=myData[id]["address"];
document.getElementById("tel").value=myData[id]["phone"];
document.getElementById("mail").value=myData[id]["mail"];
if (myData[id]["auto"]=="Есть") 
document.getElementById("auto").checked = true;
else
document.getElementById("auto").checked = false;


function glav()
{location.replace("glavnaya.html");}
function constr()
{location.replace("constructor.html");}

document.getElementById("clear").onclick = function(e) {

//document.getElementById("dolg").options[document.getElementById('dolg').selectedIndex].text="";
 document.getElementById("fam").value="";
 document.getElementById("im").value="";
 document.getElementById("otch").value="";
 document.getElementById("date").value="";
 document.getElementById("child").checked = false;
 document.getElementById("staj").value="";
 //document.getElementById("educat").options[1].text;
 document.getElementById("address").value="";
 document.getElementById("tel").value="";
 document.getElementById("mail").value="";
 document.getElementById("auto").checked = false;

}



document.getElementById("saveee").onclick = function(e) 
{

function rabotnik(dolg, family, name, otch, age, child, staj, educat, address, phone, mail, auto)
    {
      this.dolg = dolg;
      this.family = family;
      this.name = name;
      this.otch = otch;
	  this.age=age;
	  this.child=child;
	  this.staj=staj;
	  this.educat=educat;
	  this.address = address;
	  this.phone = phone;
	  this.mail=mail;    
      this.auto=auto;

this.getDolg = function(){return this.dolg;}  
this.getFamily = function(){return this.family;}
this.getName = function(){return this.name;}
this.getOtch = function(){return this.otch;}
this.getAge = function(){return this.age;}
this.getChild = function(){return this.child;}
this.getStaj = function(){return this.staj;}
this.getEducat = function(){return this.educat;}
this.getAddress = function(){return this.address;}
this.getPhone = function(){return this.phone;}
this.getMail = function(){return this.mail;}
this.getAuto = function(){return this.auto;}

    }

var d;
if (document.getElementById("child").checked == true) 
d="Есть"
else
d="Нет"

var a;
if (document.getElementById("auto").checked == true) 
a="Есть"
else
a="Нет"


var noviRabotnik = new rabotnik(document.getElementById('dolg').options[document.getElementById('dolg').selectedIndex].text, document.getElementById("fam").value, document.getElementById("im").value, document.getElementById("otch").value, document.getElementById("date").value, d, document.getElementById("staj").value, document.getElementById('educat').options[document.getElementById('educat').selectedIndex].text, document.getElementById("address").value, document.getElementById("tel").value,document.getElementById("mail").value, a);


myData[id]=noviRabotnik;

localStorage.removeItem('objectToPass');
localStorage.setItem('objectToPass',JSON.stringify(myData));


}




</script>





</body>

</html>